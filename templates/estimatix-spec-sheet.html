<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Project Specifications</title>
  <style>
    /* Page + base styles */
    @page {
      margin: 40px 50px 60px 50px;
    }

    body {
      font-family: "Times New Roman", serif;
      font-size: 11pt;
      color: #000;
      line-height: 1.4;
    }

    .header {
      text-align: left;
      margin-bottom: 16px;
    }

    .header-title {
      text-align: left;
      font-weight: bold;
      text-transform: uppercase;
      margin-bottom: 10px;
      font-size: 12pt;
    }

    .header-line {
      margin: 0;
    }

    hr {
      border: none;
      border-top: 1px solid #000;
      margin: 8px 0 16px 0;
    }

    .section-divider {
      margin: 4px 0 8px 0;
      border-top: 1px solid #000;
    }

    .section {
      margin-bottom: 18px;
      page-break-inside: avoid;
    }

    .section-title {
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 11pt;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
    }

    .scope-title {
      font-weight: bold;
      font-size: 11pt;
    }

    .scope-price {
      font-weight: bold;
      font-size: 11pt;
      margin-left: auto;
    }

    .allowance {
      font-weight: normal;
      font-style: italic;
      margin-left: 6px;
      font-size: 10.5pt;
    }

    ul {
      margin: 4px 0 4px 18px;
      padding: 0;
      list-style-type: disc;
    }

    ul ul {
      margin-top: 2px;
      list-style-type: circle; /* visually approximates the “o” bullets */
    }

    li {
      margin-bottom: 2px;
    }

    .subheader {
      margin-top: 6px;
      font-weight: bold;
    }

    .subcontractor {
      margin-top: 4px;
      font-size: 10pt;
    }

    /* Footer on every page */
    .footer {
      position: fixed;
      bottom: 18px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 9pt;
      color: #444;
    }

    /* Optional small top-right project label */
    .project-label {
      position: absolute;
      right: 0;
      top: 0;
      font-size: 9pt;
      color: #555;
    }
  </style>
</head>
<body>

  <!-- Optional small project label -->
  <div class="project-label">
    {{project_name}}
  </div>

  <!-- GENERAL INFORMATION HEADER -->
  <div class="header">
    <div class="header-title">GENERAL INFORMATION</div>

    <p class="header-line"><strong>Owner:</strong> {{owner_name}}</p>
    <p class="header-line"><strong>Address:</strong> {{project_address}}</p>
    <p class="header-line"><strong>Date:</strong> {{spec_sheet_date}}</p>

    {{#general_notes}}
    <p class="header-line">{{general_notes}}</p>
    {{/general_notes}}
  </div>

  <hr />

  <!-- REPEATED SPEC SECTIONS (116, 201, 212, etc.) -->
  {{#sections}}
  <div class="section">

    <!-- Example: "201 DEMO" or "520 WINDOWS Allowance: $62,000" -->
    <div class="section-header">
      <span class="scope-title">
        {{code}} {{title}}
        {{#if allowance}}
          <span class="allowance">Allowance: ${{formatNumber allowance}}</span>
        {{/if}}
      </span>
      {{#if scope_total_client_price}}
        <span class="scope-price">${{formatNumber scope_total_client_price}}</span>
      {{/if}}
    </div>

    <!-- Horizontal line separating header from content -->
    <hr class="section-divider" />

    <!-- Main bullet list for this section -->
    {{#if items}}
    {{#each items}}
      <!-- If this item is a "label + bullets" (like "Family room:") -->
      {{#if label}}
      <div class="subheader">{{label}}</div>
      {{/if}}

      <!-- Top-level bullet for text (if present) -->
      {{#if text}}
      <ul>
        <li>{{{text}}}
          <!-- Optional nested bullets beneath this item -->
          {{#if subitems}}
          {{#if subitems.length}}
          <ul>
            {{#each subitems}}
              <li>{{this}}</li>
            {{/each}}
          </ul>
          {{/if}}
          {{/if}}
        </li>
      </ul>
      {{/if}}

      <!-- If item has bullets only (no top-level text) -->
      {{#unless text}}
        {{#if subitems}}
        {{#if subitems.length}}
        <ul>
          {{#each subitems}}
          <li>{{this}}</li>
          {{/each}}
        </ul>
        {{/if}}
        {{/if}}
      {{/unless}}
    {{/each}}
    {{/if}}

    <!-- Optional extra paragraphs / notes -->
    {{#notes}}
      <p>{{notes}}</p>
    {{/notes}}

    <!-- Subcontractor line -->
    {{#subcontractor}}
    <div class="subcontractor">
      <strong>Subcontractor:</strong> {{subcontractor}}
    </div>
    {{/subcontractor}}

  </div>
  {{/sections}}

  <!-- FOOTER (on every page) -->
  <div class="footer">
    Estimatix • AI-Generated Estimate • © {{year}} • Page {{page}}
  </div>

</body>
</html>
